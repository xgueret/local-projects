---
- name: Stop and remove PostgreSQL Docker containers
  community.docker.docker_compose_v2:
    project_src: "{{ postgres_app_path }}"
    state: absent
  failed_when: false

- name: Display uninstall summary
  ansible.builtin.debug:
    msg:
      - "ğŸ—„ï¸ PostgreSQL uninstalled successfully!"
      - "Note: Data volumes are preserved."
      - "To remove data volumes, run: docker volume prune"
      - "To remove app directory, run: rm -rf {{ postgres_app_path }}"
