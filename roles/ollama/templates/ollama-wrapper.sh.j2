#!/bin/bash
# Ollama CLI Wrapper Script
# Generated by Ansible - DO NOT EDIT MANUALLY

# Set environment
export OLLAMA_HOST=http://localhost:{{ ollama_api_port }}

# Check if Ollama container is running
if ! docker ps | grep -q {{ ollama_container_name }}; then
    echo "❌ Error: Ollama container '{{ ollama_container_name }}' is not running"
    echo "Start it with: docker start {{ ollama_container_name }}"
    exit 1
fi

# Check if API is responding
if ! curl -s --connect-timeout 2 http://localhost:{{ ollama_api_port }}/api/version >/dev/null; then
    echo "⚠️  Warning: Ollama API not responding. Container may still be starting..."
    echo "Check status with: docker logs {{ ollama_container_name }}"
fi

# Execute ollama command with all arguments
exec {{ ollama_cli_path }} "$@"
